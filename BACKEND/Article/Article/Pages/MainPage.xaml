<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ArticleMaui.Pages.MainPage"
             Title="Ujsagok">

    <Grid RowDefinitions="Auto,*" Padding="15" RowSpacing="10">

        <HorizontalStackLayout 
        Grid.Row="0"
        HorizontalOptions="Fill"
        Spacing="10"
        VerticalOptions="Center">

            <Button 
            Text="➕ Új ujsag"
            Clicked="OnAddArticlePageClicked"
            BackgroundColor="#0078D7"
            TextColor="White"
            CornerRadius="8"
            HeightRequest="40" />
        </HorizontalStackLayout>

        <CollectionView 
        x:Name="ArticleCollectionView"
        Grid.Row="1"
        SelectionMode="None"
        VerticalScrollBarVisibility="Always"
        Margin="0,5">

            <CollectionView.ItemsLayout>
                <GridItemsLayout 
                Orientation="Vertical"
                Span="2"
                VerticalItemSpacing="10"
                HorizontalItemSpacing="10" />
            </CollectionView.ItemsLayout>

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame 
                    BorderColor="#E0E0E0"
                    BackgroundColor="{Binding BackgroundColor}"
                    CornerRadius="10"
                    Padding="10"
                    HasShadow="False"
                    Margin="5">

                        <VerticalStackLayout Spacing="6">

                            <HorizontalStackLayout Spacing="10">
                                <VerticalStackLayout Spacing="2">
                                    <Label Text="{Binding Title}" FontAttributes="Bold" FontSize="15" LineBreakMode="TailTruncation" />
                                    <Label Text="{Binding Content}" FontSize="13" TextColor="#555" LineBreakMode="TailTruncation" />
                                </VerticalStackLayout>
                            </HorizontalStackLayout> 

                            <HorizontalStackLayout Spacing="6" HorizontalOptions="End">
                                <Button 
                                Text="Módosítás"
                                Clicked="OnEditArticleClicked"
                                CommandParameter="{Binding .}"
                                BackgroundColor="#FFA500"
                                TextColor="White"
                                CornerRadius="6"
                                WidthRequest="80"
                                HeightRequest="28"
                                FontSize="10" />

                                <Button 
                                Text="Törlés"
                                Clicked="OnDeleteArticleClicked"
                                CommandParameter="{Binding .}"
                                BackgroundColor="#D32F2F"
                                TextColor="White"
                                CornerRadius="6"
                                WidthRequest="80"
                                HeightRequest="28"
                                FontSize="10" />
                            </HorizontalStackLayout>
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>

</ContentPage>
